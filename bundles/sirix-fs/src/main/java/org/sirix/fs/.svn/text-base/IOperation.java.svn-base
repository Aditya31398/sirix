package org.treetank.fs;

import com.google.common.base.Optional;

import java.nio.file.Path;
import java.util.Map;

import javax.annotation.Nonnull;

import org.treetank.api.INodeReadTrx;
import org.treetank.exception.AbsTTException;

/**
 * Interface for operations for usage with the command pattern.
 * 
 * @author Johannes Lichtenberger, University of Konstanz
 * 
 * @param <S>
 *          first argument for the operation, the Treetank transaction which is also a generic parameter for
 *          the visitor
 */
@Nonnull
public interface IOperation<S extends INodeReadTrx> {

  /**
   * Execute an operation.
   * 
   * @param pTransaction
   *          the Treetank transaction
   * @param pVisitor
   *          a visitor which can be used to plugin further metadata
   * @param pIndex
   *          simple index structure
   * @param pChild
   *          the {@link Path} instance for which a new node element should be inserted into Treetank
   * @throws AbsTTException
   *           if any operation in Treetank fails
   */
  void execute(S pTransaction, Optional<IVisitor<S>> pVisitor, Map<Path, EPath> pIndex, Path pChild)
    throws AbsTTException;
}
